<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>pycalent API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pycalent</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3

import os, time, sys, warnings, uuid, datetime

from calendar import monthrange

import gi; gi.require_version(&#34;Gtk&#34;, &#34;3.0&#34;)
from gi.repository import Gtk, Gdk
from gi.repository import GObject
from gi.repository import GLib
from gi.repository import Pango
from gi.repository import cairo

from pyvguicom import pggui, pgutils, pgsimp, pgbox, pgentry, pgsel

import calfsel

check_fill = (&#34;Notify&#34;, &#34;Sound&#34;, &#34;Popup&#34;, &#34;Beep&#34;,  &#34;Email&#34;)

class CalFormData():

    def __init__(self):
        pass

    def __str__(self):
        strx = &#34;&#34;
        for aa in dir(self):
            if aa[:2] == &#34;__&#34;:
                continue
            val = getattr(self, aa)
            strx += aa + &#34; = &#34; + str(val) + &#34;\n&#34;
        return strx

class CalAlaData():

    def __init__(self):
        self.arr = []
        pass

    def __str__(self):
        strx = &#34;&#34;
        for aa in dir(self):
            if aa[:2] == &#34;__&#34;:
                continue
            val = getattr(self, aa)
            strx += aa + &#34; = &#34; + str(val) + &#34;\n&#34;
        return strx

class CalEntry(Gtk.Window):

    def __init__(self, xxxx, yyyy, self2, callb = None, newx = False):

        warnings.simplefilter(&#34;ignore&#34;)

        Gtk.Window.__init__(self)
        self.newx = newx
        self.callb = callb
        self.set_accept_focus(True);
        self.set_events(Gdk.EventMask.ALL_EVENTS_MASK)
        self.alt = False
        self.aladat = CalAlaData()
        self.self2 = self2
        self.set_position(Gtk.WindowPosition.CENTER)
        try:
            self.set_icon_from_file(self2.config.logicon)
        except:
            #print(&#34;load icon&#34;, sys.exc_info())
            pass

        if self2.config.log &gt; 1:
            self.self2.mainwin.logwin.append_logwin(
                            &#34;Popup: %s\r&#34; % (datetime.datetime.today().ctime()) )
        #xxxx, yyyy = self2.get_pointer()
        hx, hy = self2.hit_test(xxxx, yyyy)
        (nnn, ttt, pad, xx, yy) = self2.darr[hx][hy]

        # This was the font height on draw ...
        hhh2 = self2.rect.height / 60; hhh2 = min(hhh2, 12) + 6

        xdarr = self2.get_daydat(ttt)
        xdarrs = sorted(xdarr, key=lambda val: val[1][3] * 60 + val[1][4] )
        idx = int(((yyyy - (hhh2 + 4)) - yy) // hhh2) + self2.scrollday
        #print(&#34;xdarr idx&#34;, xdarrs[idx])

        #sss = ttt.strftime(&#34;%m-%d-%y&#34;)
        tnow = datetime.datetime.today()
        self.nowh = tnow.hour; self.nowm = tnow.minute
        title = &#34;Calendar Item Entry&#34;
        #print(&#34;CalEntry init&#34;, hx, hy)
        if self.newx or idx &gt;= len(xdarrs):
            self.uuid = uuid.uuid4().hex
            xdarrs = []
            idx = 0
            self.newx = True    # Force new if blank hit test
            title += &#34; (New) &#34;
            xdat = []
        else:
            xdat = xdarrs[idx]
            if self2.config.debug &gt; 3:
                print(&#34;xdat =&#34;)
                for aa in xdat:
                    print(aa)

            title += &#34; %02d:%02d &#34; % (xdat[1][3], xdat[1][4])
            self.uuid = xdat[0]
        self.set_title(title)
        self.connect(&#34;button-press-event&#34;, self.area_button)
        self.connect(&#34;key-press-event&#34;, self.area_key)
        self.connect(&#34;key-release-event&#34;, self.area_key)
        self.row = 0; self.col = 0
        vbox = Gtk.VBox();

        # make GUI lines
        hbox5 = self.make_scriptline(xdat)
        hbox9 = self.make_workline(xdat) ; hbox5.pack_start(hbox9, 0, 0, 4)

        self.row = 0; self.col = 0
        hbox, self.dtab = self.make_dtab(ttt, xdarrs, idx, xdat)

        self.row = 0; self.col = 0
        self.ptab = self.make_ptab(ttt, xdarrs, idx)

        # Assemble all of it
        vbox.pack_start(hbox, 0, 0, 2)
        vbox.pack_start(pggui.xSpacer(), 0, 0, 0)

        hbox3 = Gtk.HBox()
        hbox3.pack_start(pggui.Label(&#34; &#34;), 0, 0, 0)
        hbox3.pack_start(self.table, 0, 0, 4)
        hbox3.pack_start(pggui.Label(&#34; &#34;), 0, 0, 0)

        hbox4 = Gtk.HBox()
        hbox4.pack_start(pggui.Label(&#34; &#34;), 0, 0, 0)
        hbox4.pack_start(self.edit, 1, 1, 4)
        hbox4.pack_start(pggui.Label(&#34; &#34;), 0, 0, 0)

        vbox.pack_start(self.ptab, 0, 0, 4)
        #vbox.pack_start(pggui.xSpacer(), 0, 0, 0)

        vbox.pack_start(hbox5, 0, 0, 4)

        vbox.pack_start(self.dtab, 0, 0, 4)
        vbox.pack_start(pggui.xSpacer(), 0, 0, 0)
        vbox.pack_start(hbox3, 0, 0, 4)

        #hbox7 = Gtk.HBox()
        #hbox7.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)
        #hbox7.pack_start(pggui.Label(&#34;_Free form text:&#34;, self.edit), 0, 0, 4)
        #hbox7.pack_start(pggui.Label(&#34; &#34;), 1, 1, 4)
        #vbox.pack_start(hbox7, 0, 0, 4)

        vbox.pack_start(hbox4, 0, 0, 4)

        hbox6 = Gtk.HBox()
        bbb1 = pggui.WideButt(&#34;_Cancel&#34;, self.cancelbut)
        bbb2 = pggui.WideButt(&#34; OK (E_xit)  &#34;, self.okbut)
        hbox6.pack_start(pggui.Label(&#34; &#34;), 1, 1, 0)
        hbox6.pack_start(bbb1, 0, 0, 2);   hbox6.pack_start(bbb2, 0, 0, 2)

        vbox.pack_start(hbox6, 0, 0, 4)

        self.add(vbox)

        self.show_all()
        self.set_modal(True)
        #self.set_keep_above(True)

        warnings.simplefilter(&#34;default&#34;)

    def make_dtab(self, ttt, xdarrs, idx, xdat):

        def change_hs2(val):
            #print(&#34;change_hs2&#34;)
            pass
        def change_ms2(val):
            #print(&#34;change_ms2&#34;)
            pass
        dtab = Gtk.Table(); #dtab.set_homogeneous(False)
        dtab.set_col_spacings(4); dtab.set_row_spacings(4)
        for aa in range(3):
            self.row += 1; self.col = 0
            cb2 = Gtk.CheckButton()
            defh = 0 ; defm = 0
            if self.newx and aa == 0:
                defh = self.nowh ; defm = self.nowm
                cb2.set_active(True)
            elif xdat:
                cb2.set_active(xdat[3][aa][0])
            hs2 = pggui.Spinner(0, 23, defh, change_hs2);
            if xdat:
                hs2.set_value(xdat[3][aa][1])
            ms2 = pggui.Spinner(0, 59, defm, change_ms2);
            if xdat:
                ms2.set_value(xdat[3][aa][2])

            #if aa == 0:
            #    if xdarrs[idx][1] == 0 and xdarrs[idx][2] == 0:
            #        hs2.set_value(self.nowh)
            #        ms2.set_value(self.nowm)

            dtab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                            Gtk.AttachOptions.FILL, Gtk.AttachOptions.FILL, 1, 1);
            self.col += 1

            dtab.attach_defaults(pggui.Label(&#34; Alarm _%d:  Enabled: &#34; % (aa+1), cb2, &#34;Enable / Disable&#34;), self.col, self.col+1, self.row, self.row + 1); self.col += 1
            dtab.attach_defaults(cb2, self.col, self.col+1, self.row,
                                                self.row + 1); self.col += 1

            dtab.attach_defaults(pggui.Label(&#34; _Hour: &#34;), self.col,
                            self.col+1,  self.row, self.row + 1)  ;
            self.col += 1
            dtab.attach_defaults(hs2, self.col, self.col+1,  self.row, self.row + 1)            ; self.col += 1

            dtab.attach_defaults(pggui.Label(&#34; Minute: &#34;), self.col,
                     self.col+1,  self.row, self.row + 1)     ;
            self.col += 1
            dtab.attach_defaults(ms2,  self.col, self.col+1,  self.row, self.row + 1)              ; self.col += 1

            hbox = Gtk.HBox();
            cccarr = []
            for bb in range(len(check_fill)):
                ccc = Gtk.CheckButton(check_fill[bb])
                if xdat:
                      ccc.set_active(xdat[3][aa][3][bb])
                cccarr.append(ccc)
                hbox.pack_start(ccc, 0, 0, 0)

            dtab.attach_defaults(hbox,  self.col+3, self.col+6,  self.row, self.row + 1)              ; self.col += 6
            self.aladat.arr.append([cb2, hs2, ms2, cccarr])

            #self.row += 1  ; self.col = 0
        dtab.attach_defaults(pggui.Label(&#34;  &#34;),
                    self.col, self.col+1, self.row, self.row + 1); self.col += 1
        #print(&#34;aladat&#34;, self.aladat)

        sss = &#34;%s %02d:%02d&#34; % (ttt.strftime(&#34;%a %d-%b-%Y&#34;), self.nowh, self.nowm )

        hbox = Gtk.HBox(); lab = pggui.Label(sss, font = &#34;Sans 16&#34;)
        lab.modify_fg(Gtk.StateType.NORMAL, Gdk.color_parse(&#34;#222222&#34;))

        hbox.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)
        hbox.pack_start(lab, 1, 1, 4)
        hbox.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)

        arrt = ((&#34; _Subject: &#34;, &#34;aa&#34;), (&#34; _Description: &#34;, &#34;hello&#34;), (&#34; _Notes: &#34;, &#34;notes&#34;))
        self.table = pggui.TextTable(arrt, textwidth=85)

        self.edit = pgsimp.SimpleEdit()
        self.edit.set_size_request(200, 200)

        if len(xdarrs) &gt; idx:
            self.table.texts[0].set_text(xdarrs[idx][2][0])
            self.table.texts[1].set_text(xdarrs[idx][2][1])
            self.table.texts[2].set_text(xdarrs[idx][2][2])
            self.edit.set_text(xdarrs[idx][2][3])

        return hbox, dtab

    def make_ptab(self, ttt, xdarrs, idx):

        ptab = Gtk.Table(); #self.ptab.set_column_homogeneous(False)
        ptab.set_col_spacings(4); ptab.set_row_spacings(4)

        ds = pggui.Spinner(0, 31, ttt.day)
        mms = pggui.Spinner(1, 12, ttt.month)
        ys = pggui.Spinner(1995, 2100, ttt.year)

        ds.set_sensitive(False); mms.set_sensitive(False); ys.set_sensitive(False);

        ADEF = ptab.attach_defaults

        ADEF(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        ADEF(pggui.Label(&#34; D_ay: &#34;, ds), self.col, self.col+1,  self.row, self.row + 1)  ;
        self.col += 1
        ADEF(ds, self.col, self.col+1,  self.row, self.row + 1) ;
        self.col += 1
        ADEF(pggui.Label(&#34; Mon_th: &#34;, mms), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        ADEF(mms,  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        ADEF(pggui.Label(&#34; Y_ear: &#34;, ys),  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        ADEF(ys,  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        ptab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                            Gtk.AttachOptions.EXPAND , Gtk.AttachOptions.EXPAND , 4, 4);
        self.col += 1
        #self.nowh = ttt.hour; self.nowm = ttt.minute
        if self.newx or idx &gt;= len(xdarrs):
            tnow = datetime.datetime.today()
            self.nowh = tnow.hour; self.nowm = tnow.minute
            # See if there is an entry, step forward
            for ff in range(10):
                got = False
                for fff in xdarrs:
                    if fff[1][3] == self.nowh:
                        if fff[1][4] == self.nowm + ff:
                            got = True
                            break

                # Assign, contain
                if not got:
                    self.nowm += ff
                    self.nowm = self.nowm % 59
                    break
            durm = 60-self.nowm
        else:
            self.nowh = xdarrs[idx][1][3]
            self.nowm = xdarrs[idx][1][4]
            durm = xdarrs[idx][1][5]

        def change_hs(val):
            #print(&#34;change_hs&#34;, val)
            if self.aladat.arr:
                self.aladat.arr[0][1].set_value(val)

        def change_ms(val):
            #print(&#34;change_ms&#34;, val)
            if self.aladat.arr:
                self.aladat.arr[0][2].set_value(val)

        def change_dds(val):
            #print(&#34;change_dds&#34;, val)
            pass

        hs  = pggui.Spinner(0, 23, self.nowh, change_hs);
        ms  = pggui.Spinner(0, 59, self.nowm, change_ms);
        dds = pggui.Spinner(0, 1000, durm, change_dds)

        hs.set_value(self.nowh)
        ms.set_value(self.nowm)

        def set_hs(val):
            #print(&#34;set_hs&#34;, val)
            hs.set_value(int(val))

        def set_ms(val):
            #print(&#34;set_ms&#34;, val)
            ms.set_value(int(val))

        def set_dds(val):
            #print(&#34;set_dds&#34;, val)
            dds.set_value(int(val))

        self.row += 1; self.col = 0
        PATT = ptab.attach_defaults
        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(pgsel.HourSel(set_hs), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(pgsel.MinSel(set_ms), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(pgsel.MinSel(set_dds), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1

        self.row += 1; self.col = 0

        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1

        PATT(pggui.Label(&#34; Hour: &#34;, hs), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(hs, self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1

        PATT(pggui.Label(&#34; Minute: &#34;, ms), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(ms,  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1

        PATT(pggui.Label(&#34; Duration: (min) &#34;, ms), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        PATT(dds,  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1

        ptab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                     Gtk.AttachOptions.EXPAND , Gtk.AttachOptions.EXPAND , 4, 4)
        self.col += 1

        self.row += 1; self.col = 0
        self.nowarr = ((ds, mms, ys, hs, ms, dds))

        return ptab

    def area_key(self, area, event):

        #print(&#34;Keyval: &#34;, event.keyval)

        if  event.type == Gdk.EventType.KEY_PRESS:
            if event.keyval == Gdk.KEY_Alt_L or \
                    event.keyval == Gdk.KEY_Alt_R:
                self.alt = True;
        if event.keyval == Gdk.KEY_Tab:
            #print (&#34;pedwin TREE TAB&#34;, event.keyval)
            pass
        if event.keyval == Gdk.KEY_Escape:
            #print (&#34; ESC &#34;, event.keyval)
            self.destroy()
            pass
        if event.keyval &gt;= Gdk.KEY_1 and event.keyval &lt;= Gdk.KEY_9:
            #print (&#34;pedwin Alt num&#34;, event.keyval - Gdk.KEY_1)
            pass
        elif  event.type == Gdk.EventType.KEY_RELEASE:
            if event.keyval == Gdk.KEY_Alt_L or \
                  event.keyval == Gdk.KEY_Alt_R:
                self.alt = False;

    def make_workline(self, xdat):
        #print(&#34;work&#34;, xdat)
        hbox6s = Gtk.HBox()
        hbox6s.pack_start(pggui.Label(&#34; &#34;), 1, 1, 4)
        rarr = [&#34;Personal&#34;, &#34;Work&#34;,]
        self.scope = rarr[0]
        cnt = 0
        try:
            for cnt, aa in enumerate(rarr):
                if xdat[2][4] == aa:
                   self.scope = aa
                   break
        except: pass
        def _radio(rad, strx):
            #print(&#34;scope set to:&#34;, strx)
            self.scope = strx
        radios = pggui.RadioGroup(rarr, _radio, True)
        radios.set_check(cnt, 1)
        hbox6s.pack_start(radios, 0, 0, 4)
        hbox6s.pack_start(pggui.Label(&#34; &#34;), 1, 1, 4)
        return hbox6s

    def make_scriptline(self, xdat):
        #print(&#34;make_scriptline&#34;, xdat[4], xdat[5])
        hbox5s = Gtk.HBox()
        hbox5s.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)
        hbox5s.pack_start(pggui.Label(&#34; Execute Script:&#34;), 0, 0, 4)
        self.scrcheck = Gtk.CheckButton(label=&#34;Enabled&#34;)
        hbox5s.pack_start(self.scrcheck, 0, 0, 4)
        self.script = Gtk.Entry()
        try:
            self.script.set_text(xdat[5])
            self.scrcheck.set_active(bool(xdat[4]))
        except: pass
        hbox5s.pack_start(self.script, True, True, 4)
        self.browse = Gtk.Button.new_with_mnemonic(&#34;_Browse&#34;)
        #self.browse.connect(&#34;button-press-event&#34;, self.browsefunc)
        self.browse.connect(&#34;clicked&#34;, self.browsefunc )
        hbox5s.pack_start(self.browse, 0, 0, 4)
        return hbox5s

    def browsefunc(self, event):
        fsel = calfsel.CalFsel(self, self.browse, event)
        #print(&#34;calfsel fname:&#34;, fsel.fname)
        if fsel.fname:
            self.script.set_text(fsel.fname)
            #self.scrcheck.set_active(True)

    def okbut(self, buff):

        if not self.callb:
            self.destroy()
            return
        if not self.table.texts[0].get_text():
            pggui.message(&#34;Subject line cannot be empty.&#34;)
            return

        #print(&#34;UUID:&#34;, self.uuid)
        cald = CalFormData()
        cald.txtarr = []
        for bb in self.table.texts:
            #print(bb.get_text(), end = &#34; &#34;)
            cald.txtarr.append(bb.get_text())

        if self.self2.config.log &gt; 1:
            self.self2.mainwin.logwin.append_logwin(
                                &#34;Saved: %s %s %s\r&#34; % (self.uuid,
                                    datetime.datetime.today().ctime(),
                                    txtarr[0] ), )
        cald.txtarr.append(self.edit.get_text())

        # Cleanse controls out of the data, assemble it
        cald.xalarr = []
        for cc in self.aladat.arr:
            #print(&#34;cc&#34;, cc[0].get_active(), cc[1].get_value(), \
            #cc[2].get_value(),  end = &#34; &#34;)
            idx = 0; ddd = []
            # Last entry
            for dd in cc[3]:
                #print(&#34;%s=%d&#34; % (check_fill[idx].strip(), dd.get_active()), end = &#34; &#34;)
                ddd.append(dd.get_active())
                idx += 1
            # Assemble, append
            ccc = (cc[0].get_active(), int(cc[1].get_value()), \
                        int(cc[2].get_value()),  ddd)
            cald.xalarr.append(ccc)
            #print()
        #print(&#34;Now array:&#34;, end = &#34; &#34;)
        cald.xnowarr = [] ;
        for ww in self.nowarr:
            #print(ww.get_value(), end = &#34; &#34;)
            cald.xnowarr.append(int(ww.get_value()))
        #print()
        cald.xscript = (self.scrcheck.get_active(), self.script.get_text(),)
        cald.xuuid = self.uuid
        cald.scope = self.scope
        #print(&#34;Saving:&#34;) ; print(str(cald))
        self.callb(&#34;OK&#34;, cald)
        self.destroy()

    def cancelbut(self, buff):
        if self.callb:
            self.callb(&#34;CANCEL&#34;, self)
        self.destroy()

    def area_button(self, butt, arg):
        #print(&#34;Button press in CalEntry&#34;)
        pass

if __name__ == &#34;__main__&#34;:
    print(&#34;This is a module file, use pycalgui.py&#34;)

# EOF</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pycalent.CalAlaData"><code class="flex name class">
<span>class <span class="ident">CalAlaData</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CalAlaData():

    def __init__(self):
        self.arr = []
        pass

    def __str__(self):
        strx = &#34;&#34;
        for aa in dir(self):
            if aa[:2] == &#34;__&#34;:
                continue
            val = getattr(self, aa)
            strx += aa + &#34; = &#34; + str(val) + &#34;\n&#34;
        return strx</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry"><code class="flex name class">
<span>class <span class="ident">CalEntry</span></span>
<span>(</span><span>xxxx, yyyy, self2, callb=None, newx=False)</span>
</code></dt>
<dd>
<div class="desc"><p>:Constructors:</p>
<p>::</p>
<pre><code>Window(**properties)
new(type:Gtk.WindowType) -&gt; Gtk.Widget
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CalEntry(Gtk.Window):

    def __init__(self, xxxx, yyyy, self2, callb = None, newx = False):

        warnings.simplefilter(&#34;ignore&#34;)

        Gtk.Window.__init__(self)
        self.newx = newx
        self.callb = callb
        self.set_accept_focus(True);
        self.set_events(Gdk.EventMask.ALL_EVENTS_MASK)
        self.alt = False
        self.aladat = CalAlaData()
        self.self2 = self2
        self.set_position(Gtk.WindowPosition.CENTER)
        try:
            self.set_icon_from_file(self2.config.logicon)
        except:
            #print(&#34;load icon&#34;, sys.exc_info())
            pass

        if self2.config.log &gt; 1:
            self.self2.mainwin.logwin.append_logwin(
                            &#34;Popup: %s\r&#34; % (datetime.datetime.today().ctime()) )
        #xxxx, yyyy = self2.get_pointer()
        hx, hy = self2.hit_test(xxxx, yyyy)
        (nnn, ttt, pad, xx, yy) = self2.darr[hx][hy]

        # This was the font height on draw ...
        hhh2 = self2.rect.height / 60; hhh2 = min(hhh2, 12) + 6

        xdarr = self2.get_daydat(ttt)
        xdarrs = sorted(xdarr, key=lambda val: val[1][3] * 60 + val[1][4] )
        idx = int(((yyyy - (hhh2 + 4)) - yy) // hhh2) + self2.scrollday
        #print(&#34;xdarr idx&#34;, xdarrs[idx])

        #sss = ttt.strftime(&#34;%m-%d-%y&#34;)
        tnow = datetime.datetime.today()
        self.nowh = tnow.hour; self.nowm = tnow.minute
        title = &#34;Calendar Item Entry&#34;
        #print(&#34;CalEntry init&#34;, hx, hy)
        if self.newx or idx &gt;= len(xdarrs):
            self.uuid = uuid.uuid4().hex
            xdarrs = []
            idx = 0
            self.newx = True    # Force new if blank hit test
            title += &#34; (New) &#34;
            xdat = []
        else:
            xdat = xdarrs[idx]
            if self2.config.debug &gt; 3:
                print(&#34;xdat =&#34;)
                for aa in xdat:
                    print(aa)

            title += &#34; %02d:%02d &#34; % (xdat[1][3], xdat[1][4])
            self.uuid = xdat[0]
        self.set_title(title)
        self.connect(&#34;button-press-event&#34;, self.area_button)
        self.connect(&#34;key-press-event&#34;, self.area_key)
        self.connect(&#34;key-release-event&#34;, self.area_key)
        self.row = 0; self.col = 0
        vbox = Gtk.VBox();

        # make GUI lines
        hbox5 = self.make_scriptline(xdat)
        hbox9 = self.make_workline(xdat) ; hbox5.pack_start(hbox9, 0, 0, 4)

        self.row = 0; self.col = 0
        hbox, self.dtab = self.make_dtab(ttt, xdarrs, idx, xdat)

        self.row = 0; self.col = 0
        self.ptab = self.make_ptab(ttt, xdarrs, idx)

        # Assemble all of it
        vbox.pack_start(hbox, 0, 0, 2)
        vbox.pack_start(pggui.xSpacer(), 0, 0, 0)

        hbox3 = Gtk.HBox()
        hbox3.pack_start(pggui.Label(&#34; &#34;), 0, 0, 0)
        hbox3.pack_start(self.table, 0, 0, 4)
        hbox3.pack_start(pggui.Label(&#34; &#34;), 0, 0, 0)

        hbox4 = Gtk.HBox()
        hbox4.pack_start(pggui.Label(&#34; &#34;), 0, 0, 0)
        hbox4.pack_start(self.edit, 1, 1, 4)
        hbox4.pack_start(pggui.Label(&#34; &#34;), 0, 0, 0)

        vbox.pack_start(self.ptab, 0, 0, 4)
        #vbox.pack_start(pggui.xSpacer(), 0, 0, 0)

        vbox.pack_start(hbox5, 0, 0, 4)

        vbox.pack_start(self.dtab, 0, 0, 4)
        vbox.pack_start(pggui.xSpacer(), 0, 0, 0)
        vbox.pack_start(hbox3, 0, 0, 4)

        #hbox7 = Gtk.HBox()
        #hbox7.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)
        #hbox7.pack_start(pggui.Label(&#34;_Free form text:&#34;, self.edit), 0, 0, 4)
        #hbox7.pack_start(pggui.Label(&#34; &#34;), 1, 1, 4)
        #vbox.pack_start(hbox7, 0, 0, 4)

        vbox.pack_start(hbox4, 0, 0, 4)

        hbox6 = Gtk.HBox()
        bbb1 = pggui.WideButt(&#34;_Cancel&#34;, self.cancelbut)
        bbb2 = pggui.WideButt(&#34; OK (E_xit)  &#34;, self.okbut)
        hbox6.pack_start(pggui.Label(&#34; &#34;), 1, 1, 0)
        hbox6.pack_start(bbb1, 0, 0, 2);   hbox6.pack_start(bbb2, 0, 0, 2)

        vbox.pack_start(hbox6, 0, 0, 4)

        self.add(vbox)

        self.show_all()
        self.set_modal(True)
        #self.set_keep_above(True)

        warnings.simplefilter(&#34;default&#34;)

    def make_dtab(self, ttt, xdarrs, idx, xdat):

        def change_hs2(val):
            #print(&#34;change_hs2&#34;)
            pass
        def change_ms2(val):
            #print(&#34;change_ms2&#34;)
            pass
        dtab = Gtk.Table(); #dtab.set_homogeneous(False)
        dtab.set_col_spacings(4); dtab.set_row_spacings(4)
        for aa in range(3):
            self.row += 1; self.col = 0
            cb2 = Gtk.CheckButton()
            defh = 0 ; defm = 0
            if self.newx and aa == 0:
                defh = self.nowh ; defm = self.nowm
                cb2.set_active(True)
            elif xdat:
                cb2.set_active(xdat[3][aa][0])
            hs2 = pggui.Spinner(0, 23, defh, change_hs2);
            if xdat:
                hs2.set_value(xdat[3][aa][1])
            ms2 = pggui.Spinner(0, 59, defm, change_ms2);
            if xdat:
                ms2.set_value(xdat[3][aa][2])

            #if aa == 0:
            #    if xdarrs[idx][1] == 0 and xdarrs[idx][2] == 0:
            #        hs2.set_value(self.nowh)
            #        ms2.set_value(self.nowm)

            dtab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                            Gtk.AttachOptions.FILL, Gtk.AttachOptions.FILL, 1, 1);
            self.col += 1

            dtab.attach_defaults(pggui.Label(&#34; Alarm _%d:  Enabled: &#34; % (aa+1), cb2, &#34;Enable / Disable&#34;), self.col, self.col+1, self.row, self.row + 1); self.col += 1
            dtab.attach_defaults(cb2, self.col, self.col+1, self.row,
                                                self.row + 1); self.col += 1

            dtab.attach_defaults(pggui.Label(&#34; _Hour: &#34;), self.col,
                            self.col+1,  self.row, self.row + 1)  ;
            self.col += 1
            dtab.attach_defaults(hs2, self.col, self.col+1,  self.row, self.row + 1)            ; self.col += 1

            dtab.attach_defaults(pggui.Label(&#34; Minute: &#34;), self.col,
                     self.col+1,  self.row, self.row + 1)     ;
            self.col += 1
            dtab.attach_defaults(ms2,  self.col, self.col+1,  self.row, self.row + 1)              ; self.col += 1

            hbox = Gtk.HBox();
            cccarr = []
            for bb in range(len(check_fill)):
                ccc = Gtk.CheckButton(check_fill[bb])
                if xdat:
                      ccc.set_active(xdat[3][aa][3][bb])
                cccarr.append(ccc)
                hbox.pack_start(ccc, 0, 0, 0)

            dtab.attach_defaults(hbox,  self.col+3, self.col+6,  self.row, self.row + 1)              ; self.col += 6
            self.aladat.arr.append([cb2, hs2, ms2, cccarr])

            #self.row += 1  ; self.col = 0
        dtab.attach_defaults(pggui.Label(&#34;  &#34;),
                    self.col, self.col+1, self.row, self.row + 1); self.col += 1
        #print(&#34;aladat&#34;, self.aladat)

        sss = &#34;%s %02d:%02d&#34; % (ttt.strftime(&#34;%a %d-%b-%Y&#34;), self.nowh, self.nowm )

        hbox = Gtk.HBox(); lab = pggui.Label(sss, font = &#34;Sans 16&#34;)
        lab.modify_fg(Gtk.StateType.NORMAL, Gdk.color_parse(&#34;#222222&#34;))

        hbox.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)
        hbox.pack_start(lab, 1, 1, 4)
        hbox.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)

        arrt = ((&#34; _Subject: &#34;, &#34;aa&#34;), (&#34; _Description: &#34;, &#34;hello&#34;), (&#34; _Notes: &#34;, &#34;notes&#34;))
        self.table = pggui.TextTable(arrt, textwidth=85)

        self.edit = pgsimp.SimpleEdit()
        self.edit.set_size_request(200, 200)

        if len(xdarrs) &gt; idx:
            self.table.texts[0].set_text(xdarrs[idx][2][0])
            self.table.texts[1].set_text(xdarrs[idx][2][1])
            self.table.texts[2].set_text(xdarrs[idx][2][2])
            self.edit.set_text(xdarrs[idx][2][3])

        return hbox, dtab

    def make_ptab(self, ttt, xdarrs, idx):

        ptab = Gtk.Table(); #self.ptab.set_column_homogeneous(False)
        ptab.set_col_spacings(4); ptab.set_row_spacings(4)

        ds = pggui.Spinner(0, 31, ttt.day)
        mms = pggui.Spinner(1, 12, ttt.month)
        ys = pggui.Spinner(1995, 2100, ttt.year)

        ds.set_sensitive(False); mms.set_sensitive(False); ys.set_sensitive(False);

        ADEF = ptab.attach_defaults

        ADEF(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        ADEF(pggui.Label(&#34; D_ay: &#34;, ds), self.col, self.col+1,  self.row, self.row + 1)  ;
        self.col += 1
        ADEF(ds, self.col, self.col+1,  self.row, self.row + 1) ;
        self.col += 1
        ADEF(pggui.Label(&#34; Mon_th: &#34;, mms), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        ADEF(mms,  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        ADEF(pggui.Label(&#34; Y_ear: &#34;, ys),  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        ADEF(ys,  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        ptab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                            Gtk.AttachOptions.EXPAND , Gtk.AttachOptions.EXPAND , 4, 4);
        self.col += 1
        #self.nowh = ttt.hour; self.nowm = ttt.minute
        if self.newx or idx &gt;= len(xdarrs):
            tnow = datetime.datetime.today()
            self.nowh = tnow.hour; self.nowm = tnow.minute
            # See if there is an entry, step forward
            for ff in range(10):
                got = False
                for fff in xdarrs:
                    if fff[1][3] == self.nowh:
                        if fff[1][4] == self.nowm + ff:
                            got = True
                            break

                # Assign, contain
                if not got:
                    self.nowm += ff
                    self.nowm = self.nowm % 59
                    break
            durm = 60-self.nowm
        else:
            self.nowh = xdarrs[idx][1][3]
            self.nowm = xdarrs[idx][1][4]
            durm = xdarrs[idx][1][5]

        def change_hs(val):
            #print(&#34;change_hs&#34;, val)
            if self.aladat.arr:
                self.aladat.arr[0][1].set_value(val)

        def change_ms(val):
            #print(&#34;change_ms&#34;, val)
            if self.aladat.arr:
                self.aladat.arr[0][2].set_value(val)

        def change_dds(val):
            #print(&#34;change_dds&#34;, val)
            pass

        hs  = pggui.Spinner(0, 23, self.nowh, change_hs);
        ms  = pggui.Spinner(0, 59, self.nowm, change_ms);
        dds = pggui.Spinner(0, 1000, durm, change_dds)

        hs.set_value(self.nowh)
        ms.set_value(self.nowm)

        def set_hs(val):
            #print(&#34;set_hs&#34;, val)
            hs.set_value(int(val))

        def set_ms(val):
            #print(&#34;set_ms&#34;, val)
            ms.set_value(int(val))

        def set_dds(val):
            #print(&#34;set_dds&#34;, val)
            dds.set_value(int(val))

        self.row += 1; self.col = 0
        PATT = ptab.attach_defaults
        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(pgsel.HourSel(set_hs), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(pgsel.MinSel(set_ms), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(pgsel.MinSel(set_dds), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1

        self.row += 1; self.col = 0

        PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1

        PATT(pggui.Label(&#34; Hour: &#34;, hs), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(hs, self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1

        PATT(pggui.Label(&#34; Minute: &#34;, ms), self.col, self.col+1, self.row, self.row + 1)
        self.col += 1
        PATT(ms,  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1

        PATT(pggui.Label(&#34; Duration: (min) &#34;, ms), self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1
        PATT(dds,  self.col, self.col+1,  self.row, self.row + 1)
        self.col += 1

        ptab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                     Gtk.AttachOptions.EXPAND , Gtk.AttachOptions.EXPAND , 4, 4)
        self.col += 1

        self.row += 1; self.col = 0
        self.nowarr = ((ds, mms, ys, hs, ms, dds))

        return ptab

    def area_key(self, area, event):

        #print(&#34;Keyval: &#34;, event.keyval)

        if  event.type == Gdk.EventType.KEY_PRESS:
            if event.keyval == Gdk.KEY_Alt_L or \
                    event.keyval == Gdk.KEY_Alt_R:
                self.alt = True;
        if event.keyval == Gdk.KEY_Tab:
            #print (&#34;pedwin TREE TAB&#34;, event.keyval)
            pass
        if event.keyval == Gdk.KEY_Escape:
            #print (&#34; ESC &#34;, event.keyval)
            self.destroy()
            pass
        if event.keyval &gt;= Gdk.KEY_1 and event.keyval &lt;= Gdk.KEY_9:
            #print (&#34;pedwin Alt num&#34;, event.keyval - Gdk.KEY_1)
            pass
        elif  event.type == Gdk.EventType.KEY_RELEASE:
            if event.keyval == Gdk.KEY_Alt_L or \
                  event.keyval == Gdk.KEY_Alt_R:
                self.alt = False;

    def make_workline(self, xdat):
        #print(&#34;work&#34;, xdat)
        hbox6s = Gtk.HBox()
        hbox6s.pack_start(pggui.Label(&#34; &#34;), 1, 1, 4)
        rarr = [&#34;Personal&#34;, &#34;Work&#34;,]
        self.scope = rarr[0]
        cnt = 0
        try:
            for cnt, aa in enumerate(rarr):
                if xdat[2][4] == aa:
                   self.scope = aa
                   break
        except: pass
        def _radio(rad, strx):
            #print(&#34;scope set to:&#34;, strx)
            self.scope = strx
        radios = pggui.RadioGroup(rarr, _radio, True)
        radios.set_check(cnt, 1)
        hbox6s.pack_start(radios, 0, 0, 4)
        hbox6s.pack_start(pggui.Label(&#34; &#34;), 1, 1, 4)
        return hbox6s

    def make_scriptline(self, xdat):
        #print(&#34;make_scriptline&#34;, xdat[4], xdat[5])
        hbox5s = Gtk.HBox()
        hbox5s.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)
        hbox5s.pack_start(pggui.Label(&#34; Execute Script:&#34;), 0, 0, 4)
        self.scrcheck = Gtk.CheckButton(label=&#34;Enabled&#34;)
        hbox5s.pack_start(self.scrcheck, 0, 0, 4)
        self.script = Gtk.Entry()
        try:
            self.script.set_text(xdat[5])
            self.scrcheck.set_active(bool(xdat[4]))
        except: pass
        hbox5s.pack_start(self.script, True, True, 4)
        self.browse = Gtk.Button.new_with_mnemonic(&#34;_Browse&#34;)
        #self.browse.connect(&#34;button-press-event&#34;, self.browsefunc)
        self.browse.connect(&#34;clicked&#34;, self.browsefunc )
        hbox5s.pack_start(self.browse, 0, 0, 4)
        return hbox5s

    def browsefunc(self, event):
        fsel = calfsel.CalFsel(self, self.browse, event)
        #print(&#34;calfsel fname:&#34;, fsel.fname)
        if fsel.fname:
            self.script.set_text(fsel.fname)
            #self.scrcheck.set_active(True)

    def okbut(self, buff):

        if not self.callb:
            self.destroy()
            return
        if not self.table.texts[0].get_text():
            pggui.message(&#34;Subject line cannot be empty.&#34;)
            return

        #print(&#34;UUID:&#34;, self.uuid)
        cald = CalFormData()
        cald.txtarr = []
        for bb in self.table.texts:
            #print(bb.get_text(), end = &#34; &#34;)
            cald.txtarr.append(bb.get_text())

        if self.self2.config.log &gt; 1:
            self.self2.mainwin.logwin.append_logwin(
                                &#34;Saved: %s %s %s\r&#34; % (self.uuid,
                                    datetime.datetime.today().ctime(),
                                    txtarr[0] ), )
        cald.txtarr.append(self.edit.get_text())

        # Cleanse controls out of the data, assemble it
        cald.xalarr = []
        for cc in self.aladat.arr:
            #print(&#34;cc&#34;, cc[0].get_active(), cc[1].get_value(), \
            #cc[2].get_value(),  end = &#34; &#34;)
            idx = 0; ddd = []
            # Last entry
            for dd in cc[3]:
                #print(&#34;%s=%d&#34; % (check_fill[idx].strip(), dd.get_active()), end = &#34; &#34;)
                ddd.append(dd.get_active())
                idx += 1
            # Assemble, append
            ccc = (cc[0].get_active(), int(cc[1].get_value()), \
                        int(cc[2].get_value()),  ddd)
            cald.xalarr.append(ccc)
            #print()
        #print(&#34;Now array:&#34;, end = &#34; &#34;)
        cald.xnowarr = [] ;
        for ww in self.nowarr:
            #print(ww.get_value(), end = &#34; &#34;)
            cald.xnowarr.append(int(ww.get_value()))
        #print()
        cald.xscript = (self.scrcheck.get_active(), self.script.get_text(),)
        cald.xuuid = self.uuid
        cald.scope = self.scope
        #print(&#34;Saving:&#34;) ; print(str(cald))
        self.callb(&#34;OK&#34;, cald)
        self.destroy()

    def cancelbut(self, buff):
        if self.callb:
            self.callb(&#34;CANCEL&#34;, self)
        self.destroy()

    def area_button(self, butt, arg):
        #print(&#34;Button press in CalEntry&#34;)
        pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>gi.overrides.Gtk.Window</li>
<li>gi.repository.Gtk.Window</li>
<li>gi.repository.Gtk.Bin</li>
<li>gi.overrides.Gtk.Container</li>
<li>gi.repository.Gtk.Container</li>
<li>gi.overrides.Gtk.Widget</li>
<li>gi.repository.Gtk.Widget</li>
<li>gi.repository.GObject.InitiallyUnowned</li>
<li>gi.overrides.GObject.Object</li>
<li>gi.repository.GObject.Object</li>
<li>gi._gi.GObject</li>
<li>gi.repository.Atk.ImplementorIface</li>
<li>gi.repository.Gtk.Buildable</li>
<li>gobject.GInterface</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pycalent.CalEntry.area_button"><code class="name flex">
<span>def <span class="ident">area_button</span></span>(<span>self, butt, arg)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def area_button(self, butt, arg):
    #print(&#34;Button press in CalEntry&#34;)
    pass</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry.area_key"><code class="name flex">
<span>def <span class="ident">area_key</span></span>(<span>self, area, event)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def area_key(self, area, event):

    #print(&#34;Keyval: &#34;, event.keyval)

    if  event.type == Gdk.EventType.KEY_PRESS:
        if event.keyval == Gdk.KEY_Alt_L or \
                event.keyval == Gdk.KEY_Alt_R:
            self.alt = True;
    if event.keyval == Gdk.KEY_Tab:
        #print (&#34;pedwin TREE TAB&#34;, event.keyval)
        pass
    if event.keyval == Gdk.KEY_Escape:
        #print (&#34; ESC &#34;, event.keyval)
        self.destroy()
        pass
    if event.keyval &gt;= Gdk.KEY_1 and event.keyval &lt;= Gdk.KEY_9:
        #print (&#34;pedwin Alt num&#34;, event.keyval - Gdk.KEY_1)
        pass
    elif  event.type == Gdk.EventType.KEY_RELEASE:
        if event.keyval == Gdk.KEY_Alt_L or \
              event.keyval == Gdk.KEY_Alt_R:
            self.alt = False;</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry.browsefunc"><code class="name flex">
<span>def <span class="ident">browsefunc</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def browsefunc(self, event):
    fsel = calfsel.CalFsel(self, self.browse, event)
    #print(&#34;calfsel fname:&#34;, fsel.fname)
    if fsel.fname:
        self.script.set_text(fsel.fname)
        #self.scrcheck.set_active(True)</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry.cancelbut"><code class="name flex">
<span>def <span class="ident">cancelbut</span></span>(<span>self, buff)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def cancelbut(self, buff):
    if self.callb:
        self.callb(&#34;CANCEL&#34;, self)
    self.destroy()</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry.make_dtab"><code class="name flex">
<span>def <span class="ident">make_dtab</span></span>(<span>self, ttt, xdarrs, idx, xdat)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def make_dtab(self, ttt, xdarrs, idx, xdat):

    def change_hs2(val):
        #print(&#34;change_hs2&#34;)
        pass
    def change_ms2(val):
        #print(&#34;change_ms2&#34;)
        pass
    dtab = Gtk.Table(); #dtab.set_homogeneous(False)
    dtab.set_col_spacings(4); dtab.set_row_spacings(4)
    for aa in range(3):
        self.row += 1; self.col = 0
        cb2 = Gtk.CheckButton()
        defh = 0 ; defm = 0
        if self.newx and aa == 0:
            defh = self.nowh ; defm = self.nowm
            cb2.set_active(True)
        elif xdat:
            cb2.set_active(xdat[3][aa][0])
        hs2 = pggui.Spinner(0, 23, defh, change_hs2);
        if xdat:
            hs2.set_value(xdat[3][aa][1])
        ms2 = pggui.Spinner(0, 59, defm, change_ms2);
        if xdat:
            ms2.set_value(xdat[3][aa][2])

        #if aa == 0:
        #    if xdarrs[idx][1] == 0 and xdarrs[idx][2] == 0:
        #        hs2.set_value(self.nowh)
        #        ms2.set_value(self.nowm)

        dtab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                        Gtk.AttachOptions.FILL, Gtk.AttachOptions.FILL, 1, 1);
        self.col += 1

        dtab.attach_defaults(pggui.Label(&#34; Alarm _%d:  Enabled: &#34; % (aa+1), cb2, &#34;Enable / Disable&#34;), self.col, self.col+1, self.row, self.row + 1); self.col += 1
        dtab.attach_defaults(cb2, self.col, self.col+1, self.row,
                                            self.row + 1); self.col += 1

        dtab.attach_defaults(pggui.Label(&#34; _Hour: &#34;), self.col,
                        self.col+1,  self.row, self.row + 1)  ;
        self.col += 1
        dtab.attach_defaults(hs2, self.col, self.col+1,  self.row, self.row + 1)            ; self.col += 1

        dtab.attach_defaults(pggui.Label(&#34; Minute: &#34;), self.col,
                 self.col+1,  self.row, self.row + 1)     ;
        self.col += 1
        dtab.attach_defaults(ms2,  self.col, self.col+1,  self.row, self.row + 1)              ; self.col += 1

        hbox = Gtk.HBox();
        cccarr = []
        for bb in range(len(check_fill)):
            ccc = Gtk.CheckButton(check_fill[bb])
            if xdat:
                  ccc.set_active(xdat[3][aa][3][bb])
            cccarr.append(ccc)
            hbox.pack_start(ccc, 0, 0, 0)

        dtab.attach_defaults(hbox,  self.col+3, self.col+6,  self.row, self.row + 1)              ; self.col += 6
        self.aladat.arr.append([cb2, hs2, ms2, cccarr])

        #self.row += 1  ; self.col = 0
    dtab.attach_defaults(pggui.Label(&#34;  &#34;),
                self.col, self.col+1, self.row, self.row + 1); self.col += 1
    #print(&#34;aladat&#34;, self.aladat)

    sss = &#34;%s %02d:%02d&#34; % (ttt.strftime(&#34;%a %d-%b-%Y&#34;), self.nowh, self.nowm )

    hbox = Gtk.HBox(); lab = pggui.Label(sss, font = &#34;Sans 16&#34;)
    lab.modify_fg(Gtk.StateType.NORMAL, Gdk.color_parse(&#34;#222222&#34;))

    hbox.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)
    hbox.pack_start(lab, 1, 1, 4)
    hbox.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)

    arrt = ((&#34; _Subject: &#34;, &#34;aa&#34;), (&#34; _Description: &#34;, &#34;hello&#34;), (&#34; _Notes: &#34;, &#34;notes&#34;))
    self.table = pggui.TextTable(arrt, textwidth=85)

    self.edit = pgsimp.SimpleEdit()
    self.edit.set_size_request(200, 200)

    if len(xdarrs) &gt; idx:
        self.table.texts[0].set_text(xdarrs[idx][2][0])
        self.table.texts[1].set_text(xdarrs[idx][2][1])
        self.table.texts[2].set_text(xdarrs[idx][2][2])
        self.edit.set_text(xdarrs[idx][2][3])

    return hbox, dtab</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry.make_ptab"><code class="name flex">
<span>def <span class="ident">make_ptab</span></span>(<span>self, ttt, xdarrs, idx)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def make_ptab(self, ttt, xdarrs, idx):

    ptab = Gtk.Table(); #self.ptab.set_column_homogeneous(False)
    ptab.set_col_spacings(4); ptab.set_row_spacings(4)

    ds = pggui.Spinner(0, 31, ttt.day)
    mms = pggui.Spinner(1, 12, ttt.month)
    ys = pggui.Spinner(1995, 2100, ttt.year)

    ds.set_sensitive(False); mms.set_sensitive(False); ys.set_sensitive(False);

    ADEF = ptab.attach_defaults

    ADEF(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
    self.col += 1
    ADEF(pggui.Label(&#34; D_ay: &#34;, ds), self.col, self.col+1,  self.row, self.row + 1)  ;
    self.col += 1
    ADEF(ds, self.col, self.col+1,  self.row, self.row + 1) ;
    self.col += 1
    ADEF(pggui.Label(&#34; Mon_th: &#34;, mms), self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1
    ADEF(mms,  self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1
    ADEF(pggui.Label(&#34; Y_ear: &#34;, ys),  self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1
    ADEF(ys,  self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1
    ptab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                        Gtk.AttachOptions.EXPAND , Gtk.AttachOptions.EXPAND , 4, 4);
    self.col += 1
    #self.nowh = ttt.hour; self.nowm = ttt.minute
    if self.newx or idx &gt;= len(xdarrs):
        tnow = datetime.datetime.today()
        self.nowh = tnow.hour; self.nowm = tnow.minute
        # See if there is an entry, step forward
        for ff in range(10):
            got = False
            for fff in xdarrs:
                if fff[1][3] == self.nowh:
                    if fff[1][4] == self.nowm + ff:
                        got = True
                        break

            # Assign, contain
            if not got:
                self.nowm += ff
                self.nowm = self.nowm % 59
                break
        durm = 60-self.nowm
    else:
        self.nowh = xdarrs[idx][1][3]
        self.nowm = xdarrs[idx][1][4]
        durm = xdarrs[idx][1][5]

    def change_hs(val):
        #print(&#34;change_hs&#34;, val)
        if self.aladat.arr:
            self.aladat.arr[0][1].set_value(val)

    def change_ms(val):
        #print(&#34;change_ms&#34;, val)
        if self.aladat.arr:
            self.aladat.arr[0][2].set_value(val)

    def change_dds(val):
        #print(&#34;change_dds&#34;, val)
        pass

    hs  = pggui.Spinner(0, 23, self.nowh, change_hs);
    ms  = pggui.Spinner(0, 59, self.nowm, change_ms);
    dds = pggui.Spinner(0, 1000, durm, change_dds)

    hs.set_value(self.nowh)
    ms.set_value(self.nowm)

    def set_hs(val):
        #print(&#34;set_hs&#34;, val)
        hs.set_value(int(val))

    def set_ms(val):
        #print(&#34;set_ms&#34;, val)
        ms.set_value(int(val))

    def set_dds(val):
        #print(&#34;set_dds&#34;, val)
        dds.set_value(int(val))

    self.row += 1; self.col = 0
    PATT = ptab.attach_defaults
    PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
    self.col += 1
    PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
    self.col += 1
    PATT(pgsel.HourSel(set_hs), self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1
    PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
    self.col += 1
    PATT(pgsel.MinSel(set_ms), self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1
    PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
    self.col += 1
    PATT(pgsel.MinSel(set_dds), self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1

    self.row += 1; self.col = 0

    PATT(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1)
    self.col += 1

    PATT(pggui.Label(&#34; Hour: &#34;, hs), self.col, self.col+1, self.row, self.row + 1)
    self.col += 1
    PATT(hs, self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1

    PATT(pggui.Label(&#34; Minute: &#34;, ms), self.col, self.col+1, self.row, self.row + 1)
    self.col += 1
    PATT(ms,  self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1

    PATT(pggui.Label(&#34; Duration: (min) &#34;, ms), self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1
    PATT(dds,  self.col, self.col+1,  self.row, self.row + 1)
    self.col += 1

    ptab.attach(pggui.Label(&#34;  &#34;), self.col, self.col+1, self.row, self.row + 1,
                 Gtk.AttachOptions.EXPAND , Gtk.AttachOptions.EXPAND , 4, 4)
    self.col += 1

    self.row += 1; self.col = 0
    self.nowarr = ((ds, mms, ys, hs, ms, dds))

    return ptab</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry.make_scriptline"><code class="name flex">
<span>def <span class="ident">make_scriptline</span></span>(<span>self, xdat)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def make_scriptline(self, xdat):
    #print(&#34;make_scriptline&#34;, xdat[4], xdat[5])
    hbox5s = Gtk.HBox()
    hbox5s.pack_start(pggui.Label(&#34; &#34;), 0, 0, 4)
    hbox5s.pack_start(pggui.Label(&#34; Execute Script:&#34;), 0, 0, 4)
    self.scrcheck = Gtk.CheckButton(label=&#34;Enabled&#34;)
    hbox5s.pack_start(self.scrcheck, 0, 0, 4)
    self.script = Gtk.Entry()
    try:
        self.script.set_text(xdat[5])
        self.scrcheck.set_active(bool(xdat[4]))
    except: pass
    hbox5s.pack_start(self.script, True, True, 4)
    self.browse = Gtk.Button.new_with_mnemonic(&#34;_Browse&#34;)
    #self.browse.connect(&#34;button-press-event&#34;, self.browsefunc)
    self.browse.connect(&#34;clicked&#34;, self.browsefunc )
    hbox5s.pack_start(self.browse, 0, 0, 4)
    return hbox5s</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry.make_workline"><code class="name flex">
<span>def <span class="ident">make_workline</span></span>(<span>self, xdat)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def make_workline(self, xdat):
    #print(&#34;work&#34;, xdat)
    hbox6s = Gtk.HBox()
    hbox6s.pack_start(pggui.Label(&#34; &#34;), 1, 1, 4)
    rarr = [&#34;Personal&#34;, &#34;Work&#34;,]
    self.scope = rarr[0]
    cnt = 0
    try:
        for cnt, aa in enumerate(rarr):
            if xdat[2][4] == aa:
               self.scope = aa
               break
    except: pass
    def _radio(rad, strx):
        #print(&#34;scope set to:&#34;, strx)
        self.scope = strx
    radios = pggui.RadioGroup(rarr, _radio, True)
    radios.set_check(cnt, 1)
    hbox6s.pack_start(radios, 0, 0, 4)
    hbox6s.pack_start(pggui.Label(&#34; &#34;), 1, 1, 4)
    return hbox6s</code></pre>
</details>
</dd>
<dt id="pycalent.CalEntry.okbut"><code class="name flex">
<span>def <span class="ident">okbut</span></span>(<span>self, buff)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def okbut(self, buff):

    if not self.callb:
        self.destroy()
        return
    if not self.table.texts[0].get_text():
        pggui.message(&#34;Subject line cannot be empty.&#34;)
        return

    #print(&#34;UUID:&#34;, self.uuid)
    cald = CalFormData()
    cald.txtarr = []
    for bb in self.table.texts:
        #print(bb.get_text(), end = &#34; &#34;)
        cald.txtarr.append(bb.get_text())

    if self.self2.config.log &gt; 1:
        self.self2.mainwin.logwin.append_logwin(
                            &#34;Saved: %s %s %s\r&#34; % (self.uuid,
                                datetime.datetime.today().ctime(),
                                txtarr[0] ), )
    cald.txtarr.append(self.edit.get_text())

    # Cleanse controls out of the data, assemble it
    cald.xalarr = []
    for cc in self.aladat.arr:
        #print(&#34;cc&#34;, cc[0].get_active(), cc[1].get_value(), \
        #cc[2].get_value(),  end = &#34; &#34;)
        idx = 0; ddd = []
        # Last entry
        for dd in cc[3]:
            #print(&#34;%s=%d&#34; % (check_fill[idx].strip(), dd.get_active()), end = &#34; &#34;)
            ddd.append(dd.get_active())
            idx += 1
        # Assemble, append
        ccc = (cc[0].get_active(), int(cc[1].get_value()), \
                    int(cc[2].get_value()),  ddd)
        cald.xalarr.append(ccc)
        #print()
    #print(&#34;Now array:&#34;, end = &#34; &#34;)
    cald.xnowarr = [] ;
    for ww in self.nowarr:
        #print(ww.get_value(), end = &#34; &#34;)
        cald.xnowarr.append(int(ww.get_value()))
    #print()
    cald.xscript = (self.scrcheck.get_active(), self.script.get_text(),)
    cald.xuuid = self.uuid
    cald.scope = self.scope
    #print(&#34;Saving:&#34;) ; print(str(cald))
    self.callb(&#34;OK&#34;, cald)
    self.destroy()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pycalent.CalFormData"><code class="flex name class">
<span>class <span class="ident">CalFormData</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CalFormData():

    def __init__(self):
        pass

    def __str__(self):
        strx = &#34;&#34;
        for aa in dir(self):
            if aa[:2] == &#34;__&#34;:
                continue
            val = getattr(self, aa)
            strx += aa + &#34; = &#34; + str(val) + &#34;\n&#34;
        return strx</code></pre>
</details>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pycalent.CalAlaData" href="#pycalent.CalAlaData">CalAlaData</a></code></h4>
</li>
<li>
<h4><code><a title="pycalent.CalEntry" href="#pycalent.CalEntry">CalEntry</a></code></h4>
<ul class="two-column">
<li><code><a title="pycalent.CalEntry.area_button" href="#pycalent.CalEntry.area_button">area_button</a></code></li>
<li><code><a title="pycalent.CalEntry.area_key" href="#pycalent.CalEntry.area_key">area_key</a></code></li>
<li><code><a title="pycalent.CalEntry.browsefunc" href="#pycalent.CalEntry.browsefunc">browsefunc</a></code></li>
<li><code><a title="pycalent.CalEntry.cancelbut" href="#pycalent.CalEntry.cancelbut">cancelbut</a></code></li>
<li><code><a title="pycalent.CalEntry.make_dtab" href="#pycalent.CalEntry.make_dtab">make_dtab</a></code></li>
<li><code><a title="pycalent.CalEntry.make_ptab" href="#pycalent.CalEntry.make_ptab">make_ptab</a></code></li>
<li><code><a title="pycalent.CalEntry.make_scriptline" href="#pycalent.CalEntry.make_scriptline">make_scriptline</a></code></li>
<li><code><a title="pycalent.CalEntry.make_workline" href="#pycalent.CalEntry.make_workline">make_workline</a></code></li>
<li><code><a title="pycalent.CalEntry.okbut" href="#pycalent.CalEntry.okbut">okbut</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pycalent.CalFormData" href="#pycalent.CalFormData">CalFormData</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>